@model ACQ.Web.App.ViewModel.Contracts
@{
    ViewBag.Title = "ContractAndStageList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/assets/datatable/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="~/assets/datatable/css/buttons.dataTables.min.css" rel="stylesheet" />
<style>
    table.dataTable tbody th, table.dataTable tbody td {
        padding: 10px 18px !important;
    }

    .red {
        color: red;
    }

    .green {
        color: forestgreen;
    }

    .cards {
        position: relative;
        display: block;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #f9f9f9;
        background-clip: border-box;
        border: 1px solid rgb(226 222 222 / 13%);
        border-radius: .25rem;
        font-size: 12px;
    }

    table.dataTable.nowrap th, table.dataTable.nowrap td {
        white-space: normal !important;
    }

    table.dataTable.nowrap th {
        font-size: 14px !important;
    }

    .ui-datepicker {
        width: 18.8em !important;
    }

    .btn-area {
        position: absolute;
        bottom: 18px;
    }

    .btn-delete {
        position: absolute;
        bottom: 18px;
        LEFT: 14%;
    }
</style>



@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "__AjaxAntiForgeryForm" }))
{
    @Html.AntiForgeryToken()


    <div class="container-fluid">

        @if (Model != null)
        {
            var contract = Model.Contrct_Detail;
            <div class="_sb">

                <div class="card flex-fill w-100 p-3">

                    <div class="form-group row">


                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Services<span style="color:red;">*</span> <span id="vldServices" style="color:red;display:none">Please enter Services</span></label>
                            <div class="form-group m-0">
                                <select class="form-select form-control Services default-disabled" name="Services" id="Services">
                                    @if (contract.Services == "Army")
                                    {
                                        <option value="Army" selected>Army</option>
                                        <option value="Navy">Navy</option>
                                        <option value="AirForce">AirForce</option>
                                    }
                                    else if (contract.Services == "Navy")
                                    {
                                        <option value="Army">Army</option>
                                        <option value="Navy" selected>Navy</option>
                                        <option value="AirForce">AirForce</option>

                                    }
                                    else if (contract.Services == "AirForce")
                                    {
                                        <option value="Army">Army</option>
                                        <option value="Navy">Navy</option>
                                        <option value="AirForce" selected>AirForce</option>

                                    }
                                    else
                                    {
                                        <option value="Army">Army</option>
                                        <option value="Navy">Navy</option>
                                        <option value="AirForce">AirForce</option>
                                    }

                                </select>

                            </div>
                        </div>

                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Contract Id <span style="color:red;">*</span> <span id="vldContractId" style="color:red;display:none">Please enter Contract Id</span></label>
                            <div class="form-group m-0">
                                <input type="text" name="ContractId" id="ContractId" placeholder="Contract Id" class="form-control default-disabled" value="@contract.ContractId" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Contract Number<span style="color:red;">*</span><span id="vldContract_Number" style="color:red;display:none">Please enter Contract Number</span></label>
                            <div class="form-group m-0">
                                <input type="text" name="Contract_Number" id="Contract_Number" placeholder="Contract Number" class="form-control default-disabled" value="@contract.Contract_Number" />

                            </div>
                        </div>
                    </div>


                    <div class="form-group row">

                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label for=" " class="col-form-label">Description<span style="color:red;">*</span><span id="vldDescriptions" style="color:red;display:none">Please enter Description</span></label>
                            <div class="form-group m-0">

                                <textarea rows="3" name="Descriptions" id="Descriptions" placeholder="Description" class="form-control default-disabled">@contract.Descriptions</textarea>

                            </div>
                        </div>
                    </div>
                    <div class="form-group row">

                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Category<span style="color:red;">*</span><span id="vldCategory" style="color:red;display:none">Please enter Category</span></label>
                            <div class="form-group m-0">
                                <input type="text" name="Category" id="Category" placeholder="Category" class="form-control default-disabled" value="@contract.Category" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <div class="form-group m-0">
                                <label for=" " class="col-form-label">Date Of Contract Signing <span style="color:red;">*</span><span id="vldDateOfContractSigning" style="color:red;display:none">Please enter Date Of Contract Signing</span></label>
                                <input type="text" name="DateOfContractSigning" id="DateOfContractSigning" value="@contract.DateOfContractSigning" placeholder="Date Of Contract Signing" class="datepicker form-control default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Effective Date/TO Date</label>
                            <div class="form-group m-0">
                                <input type="text" name="EffectiveDate" id="EffectiveDate" value="@contract.EffectiveDate" placeholder="Effective Date/TO Date" class="form-control datepicker default-disabled" />

                            </div>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">ABG Date/LC Opening Date</label>
                            <div class="form-group m-0">
                                <input type="text" name="ABGDate" id="ABGDate" placeholder="ABG Date/LC Opening Date" value="@contract.ContractId" class="form-control datepicker default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">PWBG %</label>
                            <div class="form-group m-0">
                                <input type="text" name="PWBG" id="PWBGPercentage" value="@contract.PWBGPercentage" placeholder="PWBG %" class="form-control default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class=" col-form-label">PWBG Date</label>
                            <div class="form-group m-0">
                                <input type="text" name="PWBGDate" id="PWBGDate" value="@contract.PWBGDate" placeholder="PWBG Date" class="form-control datepicker default-disabled" />

                            </div>
                        </div>

                    </div>


                    <div class="form-group row">


                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class="col-form-label">Incoterms</label>
                            <div class="form-group m-0">
                                <input type="text" name="Incoterms" id="Incoterms" value="@contract.Incoterms" placeholder="Incoterms " class="form-control default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class=" col-form-label">Warranty</label>
                            <div class="form-group m-0">
                                <input type="text" name="Warranty" id="Warranty" value="@contract.Warranty" placeholder="Warranty " class="form-control default-disabled" />

                            </div>
                        </div>

                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label for=" " class=" col-form-label">Contract Value<span style="color:red;">*</span><span id="vldContractValue" style="color:red;display:none">Please enter ContractValue</span></label>
                            <div class="form-group m-0">
                                <input type="text" name="ContractValue" id="ContractValue" value="@contract.ContractValue" placeholder="Contract Value " class="form-control default-disabled" />

                            </div>
                        </div>
                    </div>


                    <div class="form-group row">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <label class="col-form-label">FE Content</label>
                            <div class="form-group m-0">
                                <textarea rows="1" name="FEContent" id="FEContent" value="@contract.FEContent" placeholder="FE Content" class="form-control default-disabled"></textarea>

                            </div>
                        </div>
                    </div>
                    <div class="form-group row">


                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label class="col-form-label">Taxes and Duties</label>
                            <div class="form-group m-0">
                                <input type="text" name="TaxesAndDuties" value="@contract.TaxesAndDuties" id="TaxesAndDuties" placeholder="Taxes and Duties" class="form-control default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label class="col-form-label">Final Delivery Date<span style="color:red;">*</span><span id="vldFinalDeliveryDate" style="color:red;display:none">Please enter Final Delivery Date</span></label>
                            <div class="form-group m-0">
                                <input type="text" name="FinalDeliveryDate" value="@contract.FinalDeliveryDate" id="FinalDeliveryDate" placeholder="Final Delivery Date" class="form-control datepicker default-disabled" />

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-4 col-lg-4">
                            <label class="col-form-label">Grace Period</label>
                            <div class="form-group m-0">
                                <input type="text" name="GracePeriod" id="GracePeriod" value="@contract.GracePeriod" placeholder="Grace Period" class="form-control default-disabled" />

                            </div>
                        </div>
                    </div>


                </div>

            </div>

            if (Model.Stage_Detail != null && Model.Stage_Detail.Count() > 0)
            {
                <div class="_sbd">
                    <div class="sdf">

                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h3>Enter Stage/Milestone Details</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-body">
                                @foreach (var item in Model.Stage_Detail.ToList())
                                {

                                    <div class="Stage">
                                        <div class="row">
                                            <div class="col-sm-4">

                                                <div class="form-group">
                                                    <label>Stage Number <span style="color:red;">*</span></label>
                                                    <input type="text" name="StageNumber" placeholder="Stage Number" value="@item.StageNumber" class="form-control StageNumber" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Stage Description</label>
                                                    <input type="text" name="stageDescription" placeholder="Stage Description" value="@item.stageDescription" class="form-control StageDescription" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Stage Start Date</label>
                                                    <input type="text" name="StageStartdate" placeholder="Stage Start Date" value="@item.StageStartdate" class="form-control StageStartDate datepicker" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Stage Completion Date</label>
                                                    <input type="text" name="StageCompletionDate" placeholder="Stage Completion Date" value="@item.StageCompletionDate" class="form-control StageCompletionDate datepicker" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">

                                                <div class="form-group ">
                                                    <label>% Of Contract Value<span style="color:red;">*</span></label>
                                                    <input type="text" name="PercentOfContractValue" placeholder="% Of Contract Value" value="@item.PercentOfContractValue" class="form-control PercentOfContractValue" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Amount<span style="color:red;">*</span></label>
                                                    <input type="text" name="Amount" placeholder="Amount" value="@item.Amount" class="form-control Amount" />
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Due Date Of Payment<span style="color:red;">*</span></label>
                                                    <input type="text" name="DueDateOfPayment" value="@item.DueDateOfPayment" placeholder="Due Date Of Payment" class="form-control DueDateOfPayment datepicker" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Conditions</label>
                                                    <input type="text" name="Conditions" placeholder="Conditions" value="@item.Conditions" class="form-control Conditions" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Revised Date Of Payment</label>
                                                    <input type="text" name="RevisedDateOfpayment" placeholder="Revised Date Of Payment" value="@item.RevisedDateOfpayment" class="form-control RevisedDateOfPayment datepicker" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Reason For Slippage</label>
                                                    <input type="text" name="ReasonsForSlippage" placeholder="Reason For Slippage" value="@item.ReasonsForSlippage" class="form-control ReasonForSlippage" />
                                                </div>
                                            </div>
                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Actual Date Of Payment<span style="color:red;">*</span></label>
                                                    <input type="text" name="ActualDateOfPayment" placeholder="Actual Date Of Payment" value="@item.ActualDateOfPayment" class="form-control ActualDateOfPayment datepicker" />
                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Total Payment Made<span style="color:red;">*</span></label>
                                                    <select name="TotalPaymentMade" class="form-select form-control TotalPaymentMade">
                                                        @if (item.TotalPaymentMade == "Basic Stage Payment")
                                                        {
                                                            <option value="Basic Stage Payment" selected>Basic Stage Payment</option>
                                                            <option value="Taxes">Taxes</option>
                                                            <option value="Customs Duty">Customs Duty</option>
                                                            <option value="ERV Payment">ERV Payment</option>
                                                        }
                                                        else if (item.TotalPaymentMade == "Taxes")
                                                        {
                                                            <option value="Basic Stage Payment">Basic Stage Payment</option>
                                                            <option value="Taxes" selected>Taxes</option>
                                                            <option value="Customs Duty">Customs Duty</option>
                                                            <option value="ERV Payment">ERV Payment</option>
                                                        }
                                                        else if (item.TotalPaymentMade == "Customs Duty")
                                                        {
                                                            <option value="Basic Stage Payment">Basic Stage Payment</option>
                                                            <option value="Taxes">Taxes</option>
                                                            <option value="Customs Duty" selected>Customs Duty</option>
                                                            <option value="ERV Payment">ERV Payment</option>
                                                        }
                                                        else if (item.TotalPaymentMade == "ERV Payment")
                                                        {
                                                            <option value="Basic Stage Payment">Basic Stage Payment</option>
                                                            <option value="Taxes">Taxes</option>
                                                            <option value="Customs Duty">Customs Duty</option>
                                                            <option value="ERV Payment" selected>ERV Payment</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="Basic Stage Payment">Basic Stage Payment</option>
                                                            <option value="Taxes">Taxes</option>
                                                            <option value="Customs Duty">Customs Duty</option>
                                                            <option value="ERV Payment">ERV Payment</option>
                                                        }

                                                    </select>

                                                </div>
                                            </div>

                                            <div class="col-sm-4">
                                                <div class="form-group ">
                                                    <label>Full or Part Payment Made<span style="color:red;">*</span></label>
                                                    <select class="form-select form-control FullorPartPaymentMade" name="FullorPartPaymentMade">
                                                        @if (item.FullorPartPaymentMade == "Full")
                                                        {
                                                            <option value="Full" selected>Full</option>
                                                            <option value="Part">Part</option>
                                                        }
                                                        else if (item.FullorPartPaymentMade == "Part")
                                                        {
                                                            <option value="Full">Full</option>
                                                            <option value="Part" selected>Part</option>
                                                        }
                                                        else
                                                        {
                                                            <option value="Full">Full</option>
                                                            <option value="Part">Part</option>
                                                        }


                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-sm-4">

                                                <button class="btn btn-success btn-sm AddNewStage btn-area" type="button"><i class="fa fa-plus" aria-hidden="true"></i></button>               @*<button id="DeleteStage" class="btn btn-danger DeleteStage"><i class="fa fa-trash" aria-hidden="true"></i></button>*@

                                            </div>

                                        </div>
                                    </div>
                                    <hr style="width:100%;text-align:left;margin-left:0">
                                }


                            </div>
                        </div>

                    </div>

                    <button type="button" id="btnSaveDetails" class="btn btn-sm btn-success" value="Save Details" style="float:right;">Save Details</button>

                </div>
            }


        }

    </div>





}



<script src="~/assets/js/jquery-3.6.0.min.js" nonce="r@nd0m"></script>
<script src="~/assets/datatable/js/jquery.dataTables.min.js" nonce="r@nd0m"></script>
<script src="~/assets/datatable/js/dataTables.buttons.min.js" nonce="r@nd0m"></script>
<script src="~/assets/datatable/js/jszip.min.js" nonce="r@nd0m"></script>
@*<script src="~/assets/datatable/js/pdfmake.min.js"></script>*@
<script src="~/assets/datatable/js/vfs_fonts.js" nonce="r@nd0m"></script>
<script src="~/assets/datatable/js/buttons.html5.min.js" nonce="r@nd0m"></script>
<script src="~/assets/datatable/js/buttons.print.min.js" nonce="r@nd0m"></script>

<script nonce="r@nd0m">
    jQuery(document).ready(function ($) {

    });

    $(document).ready(function () {
        $('body').on('focus', ".datepicker", function () {
            $(this).datepicker({
                changeMonth: true,
                changeYear: true,
                dateFormat: "dd/mm/yy"
            });
        });

        $(document).on("click", '.AddNewStage', function () {

            $('.table-body').append(' <div class="Stage"><hr/><div class="row"><div class="col-sm-4"><div class="form-group ">                                 <label>Stage Number <span style="color:red;">*</span></label>                                 <input type="text" name="StageNumber" placeholder="Stage Number" class="form-control StageNumber" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Stage Description</label>                                 <input type="text" name="stageDescription" placeholder="Stage Description" class="form-control StageDescription" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Stage Start Date</label>                                 <input type="text" name="StageStartdate" placeholder="Stage Start Date" class="form-control StageStartDate datepicker" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Stage Completion Date</label>                                 <input type="text" name="StageCompletionDate" placeholder="Stage Completion Date" class="form-control StageCompletionDate datepicker" />                             </div>                         </div>                         <div class="col-sm-4">                              <div class="form-group ">                                 <label>% Of Contract Value<span style="color:red;">*</span></label>                                 <input type="text" name="PercentOfContractValue" placeholder="% Of Contract Value" class="form-control PercentOfContractValue" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Amount<span style="color:red;">*</span></label>                                 <input type="text" name="Amount" placeholder="Amount" class="form-control Amount" />                             </div>                         </div>                          <div class="col-sm-4">                             <div class="form-group ">                                 <label>Due Date Of Payment<span style="color:red;">*</span></label>                                 <input type="text" name="DueDateOfPayment" placeholder="Due Date Of Payment" class="form-control DueDateOfPayment datepicker" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Conditions</label>                                 <input type="text" name="Conditions" placeholder="Conditions" class="form-control Conditions" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Revised Date Of Payment</label>                                 <input type="text" name="RevisedDateOfpayment" placeholder="Revised Date Of Payment" class="form-control RevisedDateOfPayment datepicker" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Reason For Slippage</label>                                 <input type="text" name="ReasonsForSlippage" placeholder="Reason For Slippage" class="form-control ReasonForSlippage" />                             </div>                         </div>                         <div class="col-sm-4">                             <div class="form-group ">                                 <label>Actual Date Of Payment<span style="color:red;">*</span></label>                                 <input type="text" name="ActualDateOfPayment" placeholder="Actual Date Of Payment" class="form-control ActualDateOfPayment datepicker" />                             </div>                         </div>                          <div class="col-sm-4">                             <div class="form-group ">                                 <label>Total Payment Made<span style="color:red;">*</span></label>                                 <select name="TotalPaymentMade" class="form-select form-control TotalPaymentMade">                                     <option value="Basic Stage Payment">Basic Stage Payment</option>                                     <option value="Taxes">Taxes</option>                                     <option value="Customs Duty">Customs Duty</option>                                     <option value="ERV Payment">ERV Payment</option>                                 </select>                              </div>                         </div>                          <div class="col-sm-4">                             <div class="form-group ">                                 <label>Full or Part Payment Made<span style="color:red;">*</span></label>                                 <select class="form-select form-control FullorPartPaymentMade" name="FullorPartPaymentMade">                                     <option value="Yes">Yes</option>                                     <option value="No">No</option>                                  </select>                             </div>                         </div>                          <div class="col-sm-4">                             <button type="button"  class="btn btn-sm btn-success AddNewStage btn-area"><i class="fa fa-plus" aria-hidden="true"></i></button>             <button type="button" class="btn btn-sm btn-danger DeleteStage btn-delete"><i class="fa fa-trash" aria-hidden="true"></i></button>                      </div>                      </div>                 </div>');

        });

        $(document).on("click", '.DeleteStage', function () {

            $(this).parent().parent().parent().remove();

        });



    });
</script>