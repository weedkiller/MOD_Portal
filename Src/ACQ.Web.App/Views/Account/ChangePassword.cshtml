@model  ACQ.Web.ViewModel.User.ChangePasswordViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    #bg-text1{
        display:none!important;
    }
</style>

<div class="container-fluid pl-0 pt-4" style="padding-bottom: 80px;">
    <div class="row">
        <section class="col-lg-8 bg-white box-pro p-4 justify-content-center mx-auto">
            <!-- Toolbar-->
            <div class="tabHead mb-3">
                <div class="row">
                    <div class="col-md-6"><h3>Change Password</h3></div>
                </div>
            </div>


            <div class=" col-md-12 d-flex justify-content-center">
                <div class="contact-form-wrap" style="    width: inherit;">
                    <form role="form" action="ChangePassword" controller="Account" id="Myform" method="post">
                        <div id="Hide">
                            <div class="form-row mt-3">
                                <label for="old password"> Old Password<span class="required">*</span></label>

                                @Html.PasswordFor(Model => Model.Password, new { @class = " form-control bb", required = "required", tabindex = "1", autofocus = "autofocus" })
                                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger float-left gg" })
                            </div>
                            <div class="form-row password-toggle mt-3">
                                <label for="new password" class="float-left">
                                    New Password <span class="required">*</span>
                                </label>
                                @Html.PasswordFor(Model => Model.NewPassword, new { @class = " form-control prepended-form-control bb", required = "required", tabindex = "2" })
                                @Html.ValidationMessageFor(m => m.NewPassword, "", new { @class = "text-danger float-left" })
                                @*<label class="password-toggle-btn">
                                       <img src="~/assets/images/eye_close.png" height="20" width="25" />
                                    </label>*@
                            </div>
                            <div class="form-row password-toggle mt-3">
                                <label for="confirm new password" class="float-left">
                                    Confirm New Password <span class="required">*</span>
                                </label>
                                @Html.PasswordFor(Model => Model.ConfirmPassword, new { @class = " form-control prepended-form-control bb", required = "required", tabindex = "3" })
                                @Html.ValidationMessageFor(m => m.ConfirmPassword, "", new { @class = "text-danger float-left" })
                                @*<label class="password-toggle-btn">
                                        <img src="~/assets/images/eye_close.png" height="20" width="25" />
                                    </label>*@
                            </div>
                            <input type="submit" class="btn btn-primary pr-5 pl-5 mt-4 text-center col-md-12" value="Change Password" tabindex="4">
                        </div>
                    </form>
                    <div id="myModal1" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Alert</h4>
                                    @*<button type="button" class="close" data-dismiss="modal" onclick="@("window.location.href='" + @Url.RouteUrl("Admin") + "'");">&times;</button>*@
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <div class="col-md-12">
                                        <div id="myTabContent">
                                            <div class="tab-pane show" id="home" role="tabpanel" aria-labelledby="home-tab">
                                                <div class="row register-form">
                                                    <div class="col-md-12 ">
                                                        <label>Password Changed Successfully.</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div><br>
                                <div class="modal-footer">
                                    @*<button type="button" class="btn btn-sm btn-primary" onclick="@("window.location.href='" + @Url.RouteUrl("Admin") + "'");">OK</button>*@
                                    <button type="button" class="btn btn-sm btn-primary">OK</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="myModal2" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Alert</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <div class="col-md-12">
                                        <div id="myTabContent">
                                            <div class="tab-pane show" id="home" role="tabpanel" aria-labelledby="home-tab">
                                                <div class="row register-form">
                                                    <div class="col-md-12 ">
                                                        @*<label>Password Not Changed.</label>*@
                                                        <label>Enter Correct Old Password.</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div><br>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-sm btn-primary" data-dismiss="modal">OK</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>


<script>
    $(document).ready(function () {
        $("#loader-wrapper").hide();
        if ('@ViewBag.Message' === "PasswordChangeSuccessfully") {
            $('#myModal1').modal({
                display: 'show',
                backdrop: 'static',
                keyboard: false

            });
        }

        if ('@ViewBag.Message' === "PasswordNotChange") {
            //$('#myModal2').modal('show');
            $('#myModal2').modal({
                display: 'show',
                backdrop: 'static',
                keyboard: false
            });
        }
    });
</script>
<script>
    function CheckPassword() {

        var decimal = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,15}$/;
        if (ConfirmPassword.value.match(decimal)) {
            //debugger;

            var OldPassword = Password.value;
            var NewPassword = ConfirmPassword.value;

            window.location.href = "/User/ChangePassword?OldPassword=" + OldPassword + "&NewPassword=" + NewPassword;
            return true;
        }
        else {
            alert('To check a password between 8 to 15 characters which contain at least one lowercase letter, one uppercase letter, one numeric digit, and one special character')
            return false;
        }
    }
</script>
